zabbix_export:
  version: '6.0'
  date: '2024-10-14T18:00:52Z'
  groups:
    - uuid: b56506d6f54a453a90a82e58fbf49870
      name: Digiton
  templates:
    - uuid: 91af58a396fe433abbd39c22884fbcd5
      template: DRC200-API
      name: DRC200-API
      templates:
        - name: 'ICMP Ping'
      groups:
        - name: Digiton
      items:
        - uuid: c5139eef3c8840cbad124131bdd53d93
          name: 'Serial number'
          type: DEPENDENT
          key: drc.serial
          delay: '0'
          trends: '0'
          value_type: TEXT
          inventory_link: SERIALNO_A
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..Hardware.Serial
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
            - type: STR_REPLACE
              parameters:
                - '"'
                - ''
          master_item:
            key: raw.system.status
          tags:
            - tag: drc
              value: serial
        - uuid: 0337a3d2212d4900a3b4e6ffe0223e91
          name: 'CPU Temperature'
          type: DEPENDENT
          key: hardware.cpu.temperature
          delay: '0'
          history: 30d
          units: °C
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..Hardware.CPU_temp
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
            - type: STR_REPLACE
              parameters:
                - '"'
                - ''
          master_item:
            key: raw.system.status
          tags:
            - tag: component
              value: cpu
            - tag: component
              value: health
          triggers:
            - uuid: cf10b95f90d04e6a995fc5fca26bf520
              expression: 'avg(/DRC200-API/hardware.cpu.temperature,5m)>{$TEMP_CRIT_CPU}'
              name: 'CPU: Temperature is above critical threshold'
              event_name: 'CPU: Temperature is above critical threshold: >{$TEMP_CRIT_CPU}'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: HIGH
              description: 'This trigger uses temperature sensor values as well as temperature sensor status if available'
            - uuid: b3c9b379135347128240844de737ca51
              expression: 'avg(/DRC200-API/hardware.cpu.temperature,5m)>{$TEMP_WARN_CPU}'
              name: 'CPU: Temperature is above warning threshold'
              priority: WARNING
            - uuid: 0c1c6d2ac97d46bd987afe1c941d55ff
              expression: 'avg(/DRC200-API/hardware.cpu.temperature,5m)<{$TEMP_CRIT_LOW_CPU}'
              name: 'CPU: Temperature is too low'
              event_name: 'CPU: Temperature is too low: <{$TEMP_CRIT_LOW_CPU}'
              opdata: 'Current value: {ITEM.LASTVALUE1}'
              priority: AVERAGE
        - uuid: cadec2f0653b42099000220f81cab599
          name: 'CPU Usage %'
          type: DEPENDENT
          key: hardware.cpu.usage
          delay: '0'
          history: 30d
          units: '%'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..Hardware.CPU_usage
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
            - type: STR_REPLACE
              parameters:
                - '"'
                - ''
          master_item:
            key: raw.system.status
          tags:
            - tag: component
              value: cpu
            - tag: component
              value: health
          triggers:
            - uuid: 986e3233906e452bb9d1db0846baaafd
              expression: 'min(/DRC200-API/hardware.cpu.usage,5m)>{$CPU.UTIL.CRIT}'
              name: 'CPU high utlization'
              event_name: 'High CPU utilization (over {$CPU.UTIL.CRIT}% for 5m)'
              opdata: 'Current utilization: {ITEM.LASTVALUE1}'
              priority: WARNING
              description: 'CPU utilization is too high. The system might be slow to respond.'
              tags:
                - tag: scope
                  value: performance
        - uuid: 823fc8bc81354ac89cf02eb8163c37c3
          name: 'Disk usage %'
          type: DEPENDENT
          key: hardware.ddisk_usage
          delay: '0'
          history: 30d
          value_type: FLOAT
          units: '%'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..Hardware.Disk_usage
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
          master_item:
            key: raw.system.status
          tags:
            - tag: component
              value: hdd
            - tag: component
              value: health
        - uuid: 3ab7a65b288e4d4aa2d4b349f73cb5e4
          name: 'System disk usage %'
          type: DEPENDENT
          key: hardware.system_disk_usage
          delay: '0'
          history: 30d
          value_type: FLOAT
          units: '%'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..Hardware.System_disk_usage
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
          master_item:
            key: raw.system.status
          tags:
            - tag: component
              value: hdd
            - tag: component
              value: health
        - uuid: e17b905ea8cf40e0a01204760766f134
          name: 'Left level'
          type: DEPENDENT
          key: levels.left
          delay: '0'
          history: 30d
          value_type: FLOAT
          units: dB
          description: 'Состояние выхода по левому каналу выражено в dB'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data.levels.[0].left'
          master_item:
            key: raw.loudness.levels
          tags:
            - tag: LEVEL
              value: Left
        - uuid: 09756d194bd640feb8977681dca29934
          name: 'Integration level'
          type: DEPENDENT
          key: levels.LUFS
          delay: '0'
          history: 30d
          value_type: FLOAT
          units: LUFS
          description: 'Состояние выхода по интегральной громкости  выражено в LUFS'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data.levels.[0].loudness'
          master_item:
            key: raw.loudness.levels
          tags:
            - tag: LEVEL
              value: Integration
          triggers:
            - uuid: e6d9750fe8554e9d80596d65f3d7503d
              expression: 'avg(/DRC200-API/levels.LUFS,5m)<={$LOW.LEVEL}'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'avg(/DRC200-API/levels.LUFS,5m)>={$LOW.LEVEL}'
              name: 'OUTPUT Value on {HOST.NAME} is SILENCE'
              priority: DISASTER
        - uuid: 8098e69e91c34640b8551a5b78a06ca5
          name: 'Right level'
          type: DEPENDENT
          key: levels.right
          delay: '0'
          history: 30d
          value_type: FLOAT
          units: dB
          description: 'Состояние выхода по правому каналу выражено в dB'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data.levels.[0].right'
          master_item:
            key: raw.loudness.levels
          tags:
            - tag: LEVEL
              value: Right
        - uuid: 4a088228172d4f26ac18715bdf7ca614
          name: 'MP3 status'
          type: DEPENDENT
          key: mp3.status
          delay: '0'
          history: 30d
          trends: '0'
          value_type: TEXT
          description: 'Статус работы MP3 локального источника'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data.lines[1].status'
          master_item:
            key: raw.inputs.status
          tags:
            - tag: STATUS
              value: MP3
          triggers:
            - uuid: a6160a59e25e446383cd98d690aade6e
              expression: 'last(/DRC200-API/mp3.status)<>"signal"'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/DRC200-API/mp3.status)="signal"'
              name: 'MP3 status is NOT active'
              priority: INFO
        - uuid: 75a00fb409e5445a90c16475b27f03c6
          name: 'NTP Enabled status'
          type: DEPENDENT
          key: ntp.enabled.status
          delay: '0'
          history: 30d
          description: 'Состояние сервиса NTP'
          valuemap:
            name: 'NTP Status'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..network_time
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
            - type: STR_REPLACE
              parameters:
                - 'false'
                - '0'
            - type: STR_REPLACE
              parameters:
                - 'true'
                - '1'
          master_item:
            key: raw.ntp.status
          tags:
            - tag: component
              value: NTP
            - tag: status
              value: Enabled
        - uuid: 2065e4642f9643daa3dc5767ed1ccd57
          name: 'NTP Server settings'
          type: DEPENDENT
          key: ntp.ntpserver
          delay: '0'
          history: 30d
          trends: '0'
          value_type: LOG
          description: 'Состояние сервиса NTP'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..ntp_server
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
            - type: STR_REPLACE
              parameters:
                - '"'
                - ''
          master_item:
            key: raw.ntp.status
          tags:
            - tag: component
              value: NTP
            - tag: status
              value: Enabled
        - uuid: 19f1c314e61441d68e35671f3e97adca
          name: 'NTP TimeZone'
          type: DEPENDENT
          key: ntp.timezone.status
          delay: '0'
          history: 30d
          description: 'Настройка на DRC200 TimeZone'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..timezone
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
          master_item:
            key: raw.ntp.status
          tags:
            - tag: component
              value: NTP
            - tag: status
              value: Timezone
        - uuid: efe9e339b3f94ad49f2f8930e91f0b65
          name: 'Playlist active'
          type: DEPENDENT
          key: playlist.active
          delay: '0'
          history: 30d
          trends: '0'
          value_type: TEXT
          description: 'Статус активности плейлиста. Проигрывается или нет.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data.playlist_active
          master_item:
            key: raw.inputs.status
          tags:
            - tag: STATUS
              value: playlist
          triggers:
            - uuid: 8fbf218422d54157ae6cfdb0d1f5ac55
              expression: 'last(/DRC200-API/playlist.active)="false"'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/DRC200-API/playlist.active)="true"'
              name: 'Playlist is NOT active'
              priority: WARNING
              description: 'Проверка на работу плеера с использованием плейлиста'
        - uuid: 2ccf1b93b81047e1bcd0331ad0c8b5d6
          name: 'Today playlist status'
          type: DEPENDENT
          key: playlist.today.status
          delay: '0'
          history: 30d
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data.today
          master_item:
            key: raw.playlist
          tags:
            - tag: Playlist
              value: status
          triggers:
            - uuid: c611c19e511a4068b490bb58d549d515
              expression: 'last(/DRC200-API/playlist.today.status,#3)="No file"'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/DRC200-API/playlist.today.status)="Ok"'
              name: 'Today playlist status is "No file"'
              priority: WARNING
              description: 'На текущий плейлист не скачены все медиа-файлы'
              manual_close: 'YES'
            - uuid: 93a563aeb3de4769957a9c506eb5c0e6
              expression: 'last(/DRC200-API/playlist.today.status,#3)="No playlist"'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/DRC200-API/playlist.today.status)="Ok"'
              name: 'Today playlist status is "No playlist"'
              priority: AVERAGE
              description: 'На сегодня не получен файл плейлиста!'
              manual_close: 'YES'
        - uuid: ace0cf6c4a98443eb522c7c43c7d63dc
          name: 'Tomorrow playlist status'
          type: DEPENDENT
          key: playlist.tommorow.status
          delay: '0'
          history: 30d
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data.tomorrow
          master_item:
            key: raw.playlist
          tags:
            - tag: Playlist
              value: status
          triggers:
            - uuid: 2ffe11f9f31d449bb51bf2d3d5f01a2f
              expression: 'last(/DRC200-API/playlist.tommorow.status,#12)="No file"'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/DRC200-API/playlist.tommorow.status)="Ok"'
              name: 'Tomorrow playlist status is "No file"'
              priority: WARNING
              description: 'Для завтрашнего плейлиста не получены все медиа-файлы для плейлиста.'
              manual_close: 'YES'
            - uuid: e5d8a5738e0b45a6ac63d97e1c5cb991
              expression: 'last(/DRC200-API/playlist.tommorow.status,#12)="No playlist"'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/DRC200-API/playlist.tommorow.status)="Ok"'
              name: 'Tomorrow playlist status is "No playlist"'
              priority: WARNING
              description: 'Не получен завтрашний плейлист'
              manual_close: 'YES'
        - uuid: 662c52e497ac4f0d92d73091dd158cbb
          name: 'Raw Get info'
          type: HTTP_AGENT
          key: raw.info
          history: '0'
          trends: '0'
          value_type: TEXT
          url: 'https://{HOST.IP}/api/'
          posts: '{"command": "get_info", "token": "{$DRC200TOKEN}"}'
          post_type: JSON
          request_method: POST
          tags:
            - tag: RAW
        - uuid: c6aca1d74ce44818946d46cf8b756079
          name: 'Raw Get Inputs list'
          type: HTTP_AGENT
          key: raw.inputs.list
          delay: 30s
          history: '0'
          trends: '0'
          value_type: TEXT
          url: 'https://{HOST.IP}/api/'
          posts: '{"command": "get_inputs_list", "token": "{$DRC200TOKEN}"}'
          post_type: JSON
          request_method: POST
          tags:
            - tag: RAW
        - uuid: c3ca3b3ac6334b23906539a9542b3648
          name: 'Raw Get Inputs status'
          type: HTTP_AGENT
          key: raw.inputs.status
          delay: 15s
          history: '0'
          trends: '0'
          value_type: TEXT
          url: 'https://{HOST.IP}/api/'
          posts: '{"command": "get_inputs_status", "token": "{$DRC200TOKEN}"}'
          post_type: JSON
          request_method: POST
          tags:
            - tag: RAW
        - uuid: f6ee1384bde243b7a876d9e96ae649e5
          name: 'Raw Get Loudness levels'
          type: HTTP_AGENT
          key: raw.loudness.levels
          delay: 30s
          history: '0'
          trends: '0'
          value_type: TEXT
          url: 'https://{HOST.IP}/api/'
          posts: '{"command": "get_levels", "token": "{$DRC200TOKEN}"}'
          post_type: JSON
          request_method: POST
          tags:
            - tag: RAW
        - uuid: 9d0b0a8ecc7044a8b4a9290199582d5c
          name: 'Raw Get NTP status'
          type: HTTP_AGENT
          key: raw.ntp.status
          delay: 30m
          history: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: JAVASCRIPT
              parameters:
                - 'return value.replace (/\\n/gi, ''\n'')'
            - type: JAVASCRIPT
              parameters:
                - 'return value.replace (/\\/gi, '''')'
            - type: STR_REPLACE
              parameters:
                - '"{'
                - '{'
            - type: STR_REPLACE
              parameters:
                - '}"'
                - '}'
          url: 'https://{HOST.IP}/api/'
          posts: '{"command": "get_time", "token": "{$DRC200TOKEN}"}'
          post_type: JSON
          request_method: POST
          tags:
            - tag: RAW
              value: NTP
        - uuid: f1e27a3627944503a9293fda303c2eba
          name: 'Raw Get Playlist status'
          type: HTTP_AGENT
          key: raw.playlist
          delay: 10m
          history: '0'
          trends: '0'
          value_type: TEXT
          url: 'https://{HOST.IP}/api/'
          posts: '{"command": "get_playlist_readiness", "token": "{$DRC200TOKEN}"}'
          post_type: JSON
          request_method: POST
          tags:
            - tag: RAW
          triggers:
            - uuid: e3b09227714c43c6a6c21766325b1117
              expression: 'nodata(/DRC200-API/raw.playlist,3)=1'
              name: 'Raw Get Playlist status NO DATA'
              priority: WARNING
        - uuid: a01ec3dc8428423d99456319bb3a31c5
          name: 'Raw Get RDS settings'
          type: HTTP_AGENT
          key: raw.rds.settings
          history: '0'
          trends: '0'
          value_type: TEXT
          url: 'https://{HOST.IP}/api/'
          posts: '{"command": "get_rds_settings", "token": "{$DRC200TOKEN}"}'
          post_type: JSON
          request_method: POST
          tags:
            - tag: RAW
        - uuid: f4d535ee8c3c44bebb0590bbb8eab040
          name: 'Raw Get Recordes status'
          type: HTTP_AGENT
          key: raw.recorders
          delay: 10m
          history: '0'
          trends: '0'
          value_type: TEXT
          url: 'https://{HOST.IP}/api/'
          posts: '{"command": "get_recorders", "token": "{$DRC200TOKEN}"}'
          post_type: JSON
          request_method: POST
          tags:
            - tag: RAW
              value: Recorder
        - uuid: 61766083b47543ee9edd85f8acb95907
          name: 'Raw Get System status'
          type: HTTP_AGENT
          key: raw.system.status
          history: '0'
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: JAVASCRIPT
              parameters:
                - 'return value.replace (/\\n/gi, ''\n'')'
            - type: JAVASCRIPT
              parameters:
                - 'return value.replace (/\\/gi, '''')'
            - type: STR_REPLACE
              parameters:
                - '"{'
                - '{'
            - type: STR_REPLACE
              parameters:
                - '}"'
                - '}'
          url: 'https://{HOST.IP}/api/'
          posts: '{"command": "cmd_console", "token": "{$DRC200TOKEN}", "data": ["system_status"]}'
          post_type: JSON
          request_method: POST
          tags:
            - tag: RAW
              value: system
        - uuid: 749a7e7a913e4e9690b76ccb41f63d9d
          name: 'RDS AF status'
          type: DEPENDENT
          key: rds.af.status
          delay: '0'
          history: 30d
          trends: '0'
          value_type: TEXT
          description: 'AF (Alternative Frequencies list) — список альтернативных частот. Это очень хорошо применимо во время поездок за пределы одного города. Когда вы покидаете зону слабого сигнала от вышки «А» и находитесь под «сильным» влиянием вышки «Б», то приёмник просто автоматически переключится на сильнейший сигнал, обнаруживаемый благодаря этой функции. Должны соблюдаться определённые условия: PI-коды совпадают, в самом RDS-кодере прописаны те самые альтернативные частоты (от 87.6 МГц до 107.9 МГц), и сигнал хоть одной из них должен стать сильнее, чем текущая частота. Список должен содержать те частоты, на которых подаётся сигнал RDS от кодера, и которые имеют достаточное пересечение по покрытию.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..AF
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
          master_item:
            key: raw.rds.settings
          tags:
            - tag: component
              value: RDS
            - tag: status
              value: AF
        - uuid: fd516eb82a474b4fb0d2d0e7ef40b4ae
          name: 'RDS AH status'
          type: DEPENDENT
          key: rds.ah.status
          delay: '0'
          history: 30d
          description: 'No Artificial Head/Artificial Head (числовое значение =2) — при записи программы не/используется бинауральный микрофон.'
          valuemap:
            name: 'RDS Status'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..AH
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
            - type: STR_REPLACE
              parameters:
                - 'false'
                - '0'
            - type: STR_REPLACE
              parameters:
                - 'true'
                - '1'
          master_item:
            key: raw.rds.settings
          tags:
            - tag: component
              value: RDS
            - tag: status
              value: AH
        - uuid: 4beea7dd29fb445eaa2adcc3add8274d
          name: 'RDS Compressed status'
          type: DEPENDENT
          key: rds.compressed.status
          delay: '0'
          history: 30d
          description: 'Not Compressed/Compressed (числовое значение =4) — программа не /компресируется. В звуке применён FM-процессинг (компрессия) либо нет.'
          valuemap:
            name: 'RDS Status'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..Compressed
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
            - type: STR_REPLACE
              parameters:
                - 'false'
                - '0'
            - type: STR_REPLACE
              parameters:
                - 'true'
                - '1'
          master_item:
            key: raw.rds.settings
          tags:
            - tag: component
              value: RDS
            - tag: status
              value: compressed
        - uuid: 8cb84c2981454e3dbc1d499d3094b527
          name: 'RDS DynamicPTY status'
          type: DEPENDENT
          key: rds.dynamicpty.status
          delay: '0'
          history: 30d
          description: 'Static PTY Codes/Dynamic PTY Codes (числовое значение =8) — коды PTY не/изменяются динамически.'
          valuemap:
            name: 'RDS Status'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..DynamicPTY
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
            - type: STR_REPLACE
              parameters:
                - 'false'
                - '0'
            - type: STR_REPLACE
              parameters:
                - 'true'
                - '1'
          master_item:
            key: raw.rds.settings
          tags:
            - tag: component
              value: RDS
            - tag: status
              value: DynamicPTY
        - uuid: a37a1a410b364f86ad21ff2f618201e5
          name: 'RDS Enabled status'
          type: DEPENDENT
          key: rds.enabled.status
          delay: '0'
          history: 30d
          description: 'Включён или нет RDS'
          valuemap:
            name: 'RDS Status'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..Enable
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
            - type: STR_REPLACE
              parameters:
                - 'false'
                - '0'
            - type: STR_REPLACE
              parameters:
                - 'true'
                - '1'
          master_item:
            key: raw.rds.settings
          tags:
            - tag: component
              value: RDS
            - tag: status
              value: RDS
        - uuid: 72d023610b0b4ca3a3814fca656c92b7
          name: 'RDS MS status'
          type: DEPENDENT
          key: rds.ms.status
          delay: '0'
          history: 30d
          value_type: FLOAT
          description: 'MS (Music Speech switch) — используется для «управления» тембром звука в соответствии с тем, какую программу вы передаёте (музыкальную или разговорную).'
          valuemap:
            name: 'RDS Status'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..MS
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
            - type: STR_REPLACE
              parameters:
                - 'false'
                - '0'
            - type: STR_REPLACE
              parameters:
                - 'true'
                - '1'
          master_item:
            key: raw.rds.settings
          tags:
            - tag: component
              value: RDS
            - tag: status
              value: MS
        - uuid: 077021152c7344cfaadf66d747c4144e
          name: 'RDS PI status'
          type: DEPENDENT
          key: rds.pi.status
          delay: '0'
          history: 30d
          description: 'PI (Programme Identification) — это уникальный код радиостанции, состоящий из четырёх символов в 16-ричной системе. (Используются цифры от 0 до 9, и буквы от A до F'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..PI
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
          master_item:
            key: raw.rds.settings
          tags:
            - tag: component
              value: RDS
            - tag: status
              value: PI
        - uuid: f97d77a4f24e4d0bbac696ea6f55be3d
          name: 'RDS PS status'
          type: DEPENDENT
          key: rds.ps.status
          delay: '0'
          history: 30d
          trends: '0'
          value_type: TEXT
          description: 'PS (Programme Service name) — эта строчка предназначена СТРОГО для написания сокращённого названия радиостанции и ничего более. Национальным (и европейским) стандартом описано, что функция PS должна быть статическая и не использоваться для передачи текста! Рассчитана эта строчка только на 8 символов'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..PS
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
          master_item:
            key: raw.rds.settings
          tags:
            - tag: component
              value: RDS
            - tag: status
              value: PS
        - uuid: 66272e5d4d21451b97dd03c8372397ee
          name: 'RDS PTY status'
          type: DEPENDENT
          key: rds.pty.status
          delay: '0'
          history: 30d
          description: 'PTY (Programme TYpe) — задаётся жанр вашей радиостанции. Из 30 вариантов выбирайте тот, что ближе всего отражает формат вашей станции. Вам достаточно ввести число, которое по умолчанию отображает формат. Только не перепутайте: в Европе и Америке (RDS/RBDS) числа PTY подразумевает разные форматы: 4 — в Европе обозначает Sports, а в Америке — Talk; 5— Education (Rock); 22 — Travel (Public).'
          valuemap:
            name: 'PTY Mapping'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..PTY
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
          master_item:
            key: raw.rds.settings
          tags:
            - tag: component
              value: RDS
            - tag: status
              value: PTY
        - uuid: 50994d2865b6470689edb99bd38690a8
          name: 'RDS RT status'
          type: DEPENDENT
          key: rds.rt.status
          delay: '0'
          history: 30d
          trends: '0'
          value_type: TEXT
          description: |
            RT (RadioText) — вот именно в это поле нужно передавать всё то, что вы хотите донести до слушателя: название песни, адрес сайта, слоган, всё, что вашей душе угодно, и что уместится в 64 символа.
            
            RT может передаваться в одной и групп: 2А или 2В. Отличие в том, что в группе 2А мы можем использовать до 64 символов, в 2В — только 32. Не рекомендуется так же перед именем композиции писать название радиостанции или «V efire:». Длинное сообщение RT не сможет влезть целиком, если есть лишний балласт вначале.
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..RT
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
          master_item:
            key: raw.rds.settings
          tags:
            - tag: component
              value: RDS
            - tag: status
              value: RT
        - uuid: cc334359d67847459a4e1d45741e229c
          name: 'RDS RTC status'
          type: DEPENDENT
          key: rds.rtc.status
          delay: '0'
          history: 30d
          description: 'CT (Clock Time and date) — передача информации о дате и точном времени. Служит для отображения на дисплее приёмника, а так же для синхронизации ваших автомобильных часов (если это предусмотрено). Передавать в эфир мы должны всемирное координированное время UTC, и отдельно выставлять часовой пояс со смещением UTC+3.'
          valuemap:
            name: 'RDS Status'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..RTC
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
            - type: STR_REPLACE
              parameters:
                - 'false'
                - '0'
            - type: STR_REPLACE
              parameters:
                - 'true'
                - '1'
          master_item:
            key: raw.rds.settings
          tags:
            - tag: component
              value: RDS
            - tag: status
              value: RTС
        - uuid: fa0c6c6c999d4352bd4bd19b418f691a
          name: 'RDS Stereo status'
          type: DEPENDENT
          key: rds.stereo.status
          delay: '0'
          history: 30d
          description: 'Mono/Stereo (числовое значение =1) — программа в моно/стерео режиме.'
          valuemap:
            name: 'RDS Status'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..Stereo
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
            - type: STR_REPLACE
              parameters:
                - 'false'
                - '0'
            - type: STR_REPLACE
              parameters:
                - 'true'
                - '1'
          master_item:
            key: raw.rds.settings
          tags:
            - tag: component
              value: RDS
            - tag: status
              value: Stereo
        - uuid: 7416a6d8525348c999d82820612421ca
          name: 'RDS TA status'
          type: DEPENDENT
          key: rds.ta.status
          delay: '0'
          history: 30d
          description: 'TP/TA (Traffic Programme identification/Traffic Announcement identification) — эти два тега созданы для комфортной «работы» слушателя с дорожной информацией за рулём автомобиля. При активации данных режимов, происходит переключение с кассет, CD-дисков на станцию передающую дорожную обстановку. После прекращения передачи дорожной сводки происходит возврат к ранее прослушиваемой кассете или CD-диску. Стоит отметить что в машинах имеется ручная регулировка громкости при передачи дорожной информации.'
          valuemap:
            name: 'RDS Status'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..TA
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
            - type: STR_REPLACE
              parameters:
                - 'false'
                - '0'
            - type: STR_REPLACE
              parameters:
                - 'true'
                - '1'
          master_item:
            key: raw.rds.settings
          tags:
            - tag: component
              value: RDS
            - tag: status
              value: TA
        - uuid: ac0019cc07fb4116b359ddf838a5138b
          name: 'RDS TP status'
          type: DEPENDENT
          key: rds.tp.status
          delay: '0'
          history: 30d
          description: 'TP/TA (Traffic Programme identification/Traffic Announcement identification) — эти два тега созданы для комфортной «работы» слушателя с дорожной информацией за рулём автомобиля. При активации данных режимов, происходит переключение с кассет, CD-дисков на станцию передающую дорожную обстановку. После прекращения передачи дорожной сводки происходит возврат к ранее прослушиваемой кассете или CD-диску. Стоит отметить что в машинах имеется ручная регулировка громкости при передачи дорожной информации.'
          valuemap:
            name: 'RDS Status'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..TP
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
            - type: STR_REPLACE
              parameters:
                - 'false'
                - '0'
            - type: STR_REPLACE
              parameters:
                - 'true'
                - '1'
          master_item:
            key: raw.rds.settings
          tags:
            - tag: component
              value: RDS
            - tag: status
              value: TP
        - uuid: 3e32116c544945059d6652c8d7965ced
          name: 'Recorder bitrate output'
          type: DEPENDENT
          key: recorder.bitrate.output
          delay: '0'
          history: 30d
          value_type: FLOAT
          units: b
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data.[0].bitrate'
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
          master_item:
            key: raw.recorders
          tags:
            - tag: RECORDER
              value: Bitrate
          triggers:
            - uuid: 3372dc4f6c58404b9a75581742c9319a
              expression: 'last(/DRC200-API/recorder.bitrate.output)<>{$DRC200BITRATERECORDER}'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/DRC200-API/recorder.bitrate.output)={$DRC200BITRATERECORDER}'
              name: 'Recorder bitrate output is NOT 64k'
              priority: INFO
              description: 'Проверка на верность настройки битрейта для рекордера.'
        - uuid: 090ba8953d8048a9862c27c735cd82e5
          name: 'Recorder bitrate tuner'
          type: DEPENDENT
          key: recorder.bitrate.tuner
          delay: '0'
          history: 30d
          value_type: FLOAT
          units: b
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data.[0].bitrate'
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
          master_item:
            key: raw.recorders
          tags:
            - tag: RECORDER
              value: Bitrate
          triggers:
            - uuid: 7e0e61301d0743558a39e6fcd27312c6
              expression: 'last(/DRC200-API/recorder.bitrate.tuner)<>{$DRC200BITRATERECORDER}'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/DRC200-API/recorder.bitrate.tuner)={$DRC200BITRATERECORDER}'
              name: 'Recorder bitrate tuner is NOT 64k'
              priority: INFO
              description: 'Проверка на верность настройки битрейта для рекордера.'
        - uuid: a2811df39b0a48c9b9ea8abca5567e21
          name: 'Recorder upload status'
          type: DEPENDENT
          key: recorder.bitrate.upload
          delay: '0'
          history: 30d
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..upload
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
          master_item:
            key: raw.recorders
          tags:
            - tag: RECORDER
              value: Upload
          triggers:
            - uuid: a3742f6407c648d6925e37ca7fcf1561
              expression: 'last(/DRC200-API/recorder.bitrate.upload)<>{$DRC200RECUPLOADSTATUS}'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/DRC200-API/recorder.bitrate.upload)={$DRC200RECUPLOADSTATUS}'
              name: 'Recorder upload status is NOT normal'
              priority: INFO
              description: 'Проверка на корректность настройки контрольной записи и выгрузки её на сервер WebDAV'
        - uuid: 928c46d0dfc74421b5bce68f716d90b8
          name: 'Recorder capture point'
          type: DEPENDENT
          key: recorder.capturepoint
          delay: '0'
          history: 30d
          trends: '0'
          value_type: TEXT
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..capture_point
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
            - type: STR_REPLACE
              parameters:
                - '"'
                - ''
            - type: STR_REPLACE
              parameters:
                - /static/
                - ''
          master_item:
            key: raw.recorders
          tags:
            - tag: RECORDER
              value: 'Capture point'
          triggers:
            - uuid: ca7640add5164d41a10906a473e634f9
              expression: 'last(/DRC200-API/recorder.capturepoint)<>{$DRC200RECCAPTUREPOINT}'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/DRC200-API/recorder.capturepoint)={$DRC200RECCAPTUREPOINT}'
              name: 'Recorder capture point is NOT normal'
              priority: INFO
              description: 'Проверка на корректность настройки контрольной записи - что именно пишем.'
        - uuid: 08d6f55e765344a6a043cebc544cbf06
          name: 'Tuner freq'
          type: DEPENDENT
          key: status.tuner.freq
          delay: '0'
          history: 30d
          trends: '0'
          value_type: FLOAT
          units: Mhz
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..Tuner.freq
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
            - type: MULTIPLIER
              parameters:
                - '0.01'
          master_item:
            key: raw.system.status
          tags:
            - tag: status
              value: tuner
          triggers:
            - uuid: 07f574d438134c2bac7250ab8956736f
              expression: 'last(/DRC200-API/status.tuner.freq)<>{$TUNER_FREQ}'
              name: 'Tuner settings are NOT correct in frequency'
              status: DISABLED
              priority: WARNING
        - uuid: b5bc9be989514eb896f2ead19e73449a
          name: 'Stream status'
          type: DEPENDENT
          key: stream.status
          delay: '0'
          history: 30d
          trends: '0'
          value_type: TEXT
          description: 'Статус работы Интернет стрима'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$.data.lines[0].status'
          master_item:
            key: raw.inputs.status
          tags:
            - tag: STATUS
              value: stream
          triggers:
            - uuid: 18d101081691454eb2d5201c84a2fc4e
              expression: 'last(/DRC200-API/stream.status)<>"signal"'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/DRC200-API/stream.status)="signal"'
              name: 'Stream status is NOT active'
              priority: WARNING
              description: 'Проверка работы резервного источника Stream'
        - uuid: 6c2046ddd8fa4c31bbf80247c222f6c2
          name: 'Stream URL'
          type: DEPENDENT
          key: stream.url
          delay: '0'
          trends: '0'
          value_type: TEXT
          description: 'URL интернет стрима'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..address
            - type: STR_REPLACE
              parameters:
                - '"'
                - ''
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
          master_item:
            key: raw.inputs.list
          tags:
            - tag: STREAM
              value: URL
          triggers:
            - uuid: f1a3b619763b49039402f2968f2cc40b
              expression: 'last(/DRC200-API/stream.url)<>{$STREAM.URL}'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'last(/DRC200-API/stream.url)={$STREAM.URL}'
              name: 'Stream URL Warning'
              priority: WARNING
              description: 'Проверка на корректность используемого URL в Stream'
        - uuid: 04a27d55e4dd46f8be87e0ffc49f67c2
          name: 'NTP UTC Time'
          type: DEPENDENT
          key: system.localtime
          delay: '0'
          history: 30d
          units: unixtime
          description: 'Текущее время в UTC'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..utc_time
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
            - type: STR_REPLACE
              parameters:
                - '"'
                - ''
            - type: JAVASCRIPT
              parameters:
                - |
                  const date = new Date(value);
                  const timestampSeconds = Math.floor(date.getTime() / 1000);
                  return(timestampSeconds)
          master_item:
            key: raw.ntp.status
          tags:
            - tag: component
              value: NTP
            - tag: status
              value: 'UTC Time'
          triggers:
            - uuid: 8e42dea14909456ab6d4c7887a13604f
              expression: 'fuzzytime(/DRC200-API/system.localtime,{$SYSTEM.FUZZYTIME.MAX})=0'
              name: 'System time is out of sync'
              event_name: 'System time is out of sync (diff with Zabbix server > {$SYSTEM.FUZZYTIME.MAX}s)'
              priority: WARNING
              description: 'The host system time is different from the Zabbix server time.'
              manual_close: 'YES'
        - uuid: 5d1e115312464af58b75d0a604c03b9a
          name: Uptime
          type: DEPENDENT
          key: system.uptime
          delay: '0'
          history: 30d
          trends: '0'
          value_type: TEXT
          description: 'DRC200 Uptime'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..Hardware.Uptime
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
            - type: STR_REPLACE
              parameters:
                - '"'
                - ''
          master_item:
            key: raw.system.status
          tags:
            - tag: SYSTEM
              value: Uptime
        - uuid: 51e7a854016d4691a9c56ee57a204406
          name: 'Pilot tone status'
          type: DEPENDENT
          key: tuner.pilot.status
          delay: '0'
          history: 30d
          valuemap:
            name: 'Pilot tone presented'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..Tuner.Pilot
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
            - type: STR_REPLACE
              parameters:
                - '"'
                - ''
          master_item:
            key: raw.system.status
          tags:
            - tag: STATUS
              value: 'Pilot tone'
          triggers:
            - uuid: 961efe6b60cf4cce8a504a4aac9755f2
              expression: 'avg(/DRC200-API/tuner.pilot.status,#5)=0'
              name: 'Pilot tone status'
              priority: DISASTER
              description: 'The pilot tone is MISSING!!!'
        - uuid: f1062e0bd5c047158968e5cfce51111f
          name: 'Tuner RSSI'
          type: DEPENDENT
          key: tuner.rssi
          delay: '0'
          history: 30d
          value_type: FLOAT
          units: dBm
          description: 'Received Signal Strength Indicator'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..Tuner.RSSI
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
          master_item:
            key: raw.system.status
          tags:
            - tag: component
              value: tuner
        - uuid: f3ae75c031b4415eb8654f31607fdc87
          name: 'Tuner SNR'
          type: DEPENDENT
          key: tuner.snr
          delay: '0'
          history: 30d
          value_type: FLOAT
          description: 'Received Signal Strength Indicator'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data..Tuner.SNR
            - type: STR_REPLACE
              parameters:
                - '['
                - ''
            - type: STR_REPLACE
              parameters:
                - ']'
                - ''
          master_item:
            key: raw.system.status
          tags:
            - tag: component
              value: tuner
      httptests:
        - uuid: f69ad7778ed64bdba8736ffdad27fe36
          name: 'Check https'
          steps:
            - name: 'First stap'
              url: 'https://{HOST.IP}'
              follow_redirects: 'NO'
              required: 'Digiline DRC.200'
      macros:
        - macro: '{$CPU.UTIL.CRIT}'
          value: '90'
        - macro: '{$DRC200BITRATERECORDER}'
          value: '64000'
        - macro: '{$DRC200RECCAPTUREPOINT}'
          value: 'output,tuner'
        - macro: '{$DRC200RECUPLOADSTATUS}'
          value: 'true,true'
        - macro: '{$DRC200TOKEN}'
        - macro: '{$LOW.LEVEL}'
          value: '-52'
          description: 'Значение в LUFs при котором будет производиться сработка на ТИШИНУ'
        - macro: '{$STREAM.URL}'
          value: ''
          description: 'Проверка корректности STREAM URL'
        - macro: '{$SYSTEM.FUZZYTIME.MAX}'
          value: '60'
          description: 'The threshold for difference of system time in seconds.'
        - macro: '{$TEMP_CRIT_CPU}'
          value: '95'
        - macro: '{$TEMP_CRIT_LOW_CPU}'
          value: '5'
        - macro: '{$TEMP_WARN_CPU}'
          value: '85'
        - macro: '{$TUNER_FREQ}'
      valuemaps:
        - uuid: 71b7f0d21c9e4bd79416a3d8f42384e8
          name: 'NTP Status'
          mappings:
            - value: '0'
              newvalue: 'false'
            - value: '1'
              newvalue: 'true'
        - uuid: 107a99d056c5490bbf467208807613b6
          name: 'Pilot tone presented'
          mappings:
            - value: '1'
              newvalue: 'Is present'
            - value: '0'
              newvalue: 'Not Present'
        - uuid: 33436aefe4e04c8ba6a74442592a6e60
          name: 'PTY Mapping'
          mappings:
            - value: '0'
              newvalue: 'The program type is not defined'
            - value: '1'
              newvalue: News
            - value: '2'
              newvalue: 'Current Affairs'
            - value: '3'
              newvalue: Information
            - value: '4'
              newvalue: Sport
            - value: '5'
              newvalue: Education
            - value: '6'
              newvalue: Drama
            - value: '7'
              newvalue: Culture
            - value: '8'
              newvalue: Science
            - value: '9'
              newvalue: Varied
            - value: '10'
              newvalue: 'Pop Music'
            - value: '11'
              newvalue: 'Rock Music'
            - value: '12'
              newvalue: 'Easi Listening'
            - value: '13'
              newvalue: 'Light Classical'
            - value: '14'
              newvalue: 'Serious Classical'
            - value: '15'
              newvalue: 'Other music'
            - value: '16'
              newvalue: Weather
            - value: '17'
              newvalue: Finance
            - value: '18'
              newvalue: 'Children`s Programs'
            - value: '19'
              newvalue: 'Social Affairs'
            - value: '20'
              newvalue: Religion
            - value: '21'
              newvalue: 'Phone In'
            - value: '22'
              newvalue: Travel
            - value: '23'
              newvalue: Leisure
            - value: '24'
              newvalue: 'Jazz Music'
            - value: '25'
              newvalue: 'Country music'
            - value: '26'
              newvalue: 'National Music'
            - value: '27'
              newvalue: 'Oldies Music'
            - value: '28'
              newvalue: 'Folk Music'
            - value: '29'
              newvalue: Documentary
            - value: '30'
              newvalue: 'ALARM TEST'
            - value: '31'
              newvalue: ALARM
        - uuid: a9cd3829d15448aab005e52b86bccb05
          name: 'RDS Status'
          mappings:
            - value: '0'
              newvalue: 'false'
            - value: '1'
              newvalue: 'true'
  triggers:
    - uuid: 3886d13daa75499c8223db5e0aa56cea
      expression: 'sum(/DRC200-API/web.test.fail[Check https],#3)=3'
      recovery_mode: RECOVERY_EXPRESSION
      recovery_expression: 'last(/DRC200-API/web.test.fail[Check https])=0'
      name: 'HTTPS service on {HOST.NAME} is DOWN'
      priority: WARNING
